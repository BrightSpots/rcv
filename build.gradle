plugins {
    id 'application'
    id 'org.openjfx.javafxplugin' version '0.0.7'
    id 'org.beryx.jlink' version '2.9.4'
}

// fixes issue with TabulatorTest loading
sourceCompatibility = JavaVersion.VERSION_11

apply plugin: 'java'

repositories {
    mavenCentral()
}

// fixes issue with loading resources from intelliJ
allprojects {
    apply plugin: 'idea'
    idea.module.outputDir file("out/production/classes")

    gradle.projectsEvaluated {
        tasks.withType(JavaCompile) {
            options.compilerArgs << "-Xlint:unchecked"
        }
    }
}

dependencies {

    compile 'org.apache.poi:poi:4.1.0'
    compile 'org.apache.poi:poi-ooxml:4.1.0'
    compile 'org.apache.poi:poi-ooxml-schemas:4.1.0'
    compile 'org.apache.xmlbeans:xmlbeans:3.1.0'
    compile 'com.fasterxml.jackson.core:jackson-databind:2.9.9'
    compile 'org.apache.commons:commons-csv:1.6'
    compile 'com.fasterxml.jackson.core:jackson-core:2.9.9'
    compile 'com.fasterxml.jackson.core:jackson-annotations:2.9.9'
    testCompile 'org.junit.jupiter:junit-jupiter-api:5.5.0-M1'

}

javafx {
    version = "12"
    modules = ['javafx.controls', 'javafx.fxml']
}

mainClassName = "$moduleName/com.rcv.Main"

jlink {
    // TODO: address warnings here
    options = ['--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']
    launcher {
        name = 'rcv'
    }
}